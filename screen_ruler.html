<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ¨çº¿å°ºå­ - ç²¾å‡†å±å¹•æµ‹é‡å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .ruler-section {
            padding: 30px;
            background: #fff;
            text-align: center;
            position: relative;
        }

        .ruler-container {
            position: relative;
            display: inline-block;
            margin: 20px 0;
        }

        .ruler {
            position: relative;
            background: linear-gradient(to bottom, #fff 0%, #f8f9fa 100%);
            border: 2px solid #333;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            font-weight: bold;
            color: #333;
            user-select: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .ruler.horizontal {
            height: 80px;
            min-width: 300px;
        }

        .ruler.vertical {
            width: 80px;
            min-height: 300px;
            display: inline-block;
        }

        .scale-line {
            position: absolute;
            background: #333;
        }

        .ruler.horizontal .scale-line {
            bottom: 0;
            width: 1px;
        }

        .ruler.vertical .scale-line {
            left: 0;
            height: 1px;
        }

        .scale-line.cm {
            background: #000;
        }

        .ruler.horizontal .scale-line.cm {
            height: 30px;
            width: 2px;
        }

        .ruler.horizontal .scale-line.mm5 {
            height: 20px;
            width: 1.5px;
        }

        .ruler.horizontal .scale-line.mm {
            height: 12px;
        }

        .ruler.vertical .scale-line.cm {
            width: 30px;
            height: 2px;
        }

        .ruler.vertical .scale-line.mm5 {
            width: 20px;
            height: 1.5px;
        }

        .ruler.vertical .scale-line.mm {
            width: 12px;
        }

        .scale-number {
            position: absolute;
            font-size: 11px;
            font-weight: bold;
            color: #000;
            z-index: 10;
        }

        .ruler.horizontal .scale-number {
            bottom: 35px;
            transform: translateX(-50%);
        }

        .ruler.vertical .scale-number {
            left: 35px;
            transform: translateY(-50%);
            writing-mode: vertical-lr;
        }

        .controls {
            background: #f8f9fa;
            padding: 30px;
            border-top: 1px solid #e9ecef;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .control-panel {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .control-panel h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 16px;
        }

        .ppi-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .ppi-input {
            width: 80px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            font-size: 12px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }

        .reference-objects {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .reference-objects h4 {
            color: #27ae60;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .reference-list {
            font-size: 12px;
            line-height: 1.5;
        }

        .orientation-toggle {
            margin-bottom: 20px;
        }

        .toggle-btn {
            background: #e74c3c;
            color: white;
            margin: 0 5px;
        }

        .toggle-btn.active {
            background: #c0392b;
        }

        .units-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .unit-btn {
            padding: 5px 10px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .unit-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .device-presets {
            margin-top: 15px;
        }

        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
            margin-top: 10px;
        }

        .preset-btn {
            padding: 8px 12px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            text-align: center;
        }

        .preset-btn:hover {
            background: #e9ecef;
        }

        .calibration-tip {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .calibration-tip h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .calibration-tip p {
            color: #856404;
            font-size: 13px;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 24px;
            }
            
            .ruler-section {
                padding: 20px;
            }
            
            .controls {
                padding: 20px;
            }
            
            .control-group {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .ppi-control {
                flex-direction: column;
                align-items: stretch;
            }
            
            .preset-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>åœ¨çº¿å°ºå­ - ç²¾å‡†å±å¹•æµ‹é‡å·¥å…·</h1>
        <p>ä¾¿æ·å‡†ç¡®çš„è™šæ‹Ÿå°ºå­ï¼Œæ”¯æŒå˜ç±³ã€æ¯«ç±³ã€è‹±å¯¸æµ‹é‡</p>
    </div>

    <div class="main-container">
        <div class="ruler-section">
            <div class="orientation-toggle">
                <button class="btn toggle-btn active" onclick="setOrientation('horizontal')">æ¨ªå‘å°ºå­ â†”</button>
                <button class="btn toggle-btn" onclick="setOrientation('vertical')">å‚ç›´å°ºå­ â†•</button>
            </div>
            
            <div class="units-toggle">
                <button class="unit-btn active" onclick="setUnit('cm')">å˜ç±³/æ¯«ç±³</button>
                <button class="unit-btn" onclick="setUnit('inch')">è‹±å¯¸</button>
            </div>
            
            <div class="ruler-container">
                <div class="ruler horizontal" id="ruler"></div>
            </div>
            
            <p style="margin-top: 15px; color: #666; font-size: 13px;">
                å½“å‰å°ºå­é•¿åº¦: <span id="rulerLengthDisplay">0</span> | 
                PPI: <span id="currentPPI">96</span> | 
                ç²¾åº¦: <span id="accuracy">æ ‡å‡†</span>
            </p>
        </div>

        <div class="controls">
            <div class="control-group">
                <div class="control-panel">
                    <h3>ğŸ¯ PPI æ ¡å‡†</h3>
                    <div class="ppi-control">
                        <label>PPIå€¼:</label>
                        <input type="number" id="ppiInput" class="ppi-input" value="96" min="50" max="500">
                        <button class="btn btn-primary" onclick="setPPI()">åº”ç”¨</button>
                    </div>
                    
                    <div class="device-presets">
                        <h4>è®¾å¤‡é¢„è®¾:</h4>
                        <div class="preset-grid">
                            <button class="preset-btn" onclick="setDevicePreset(96)">æ ‡å‡†æ˜¾ç¤ºå™¨<br>96 PPI</button>
                            <button class="preset-btn" onclick="setDevicePreset(110)">ç¬”è®°æœ¬<br>110 PPI</button>
                            <button class="preset-btn" onclick="setDevicePreset(163)">iPhone<br>163 PPI</button>
                            <button class="preset-btn" onclick="setDevicePreset(132)">iPad<br>132 PPI</button>
                            <button class="preset-btn" onclick="setDevicePreset(160)">Android<br>160 PPI</button>
                            <button class="preset-btn" onclick="setDevicePreset(220)">é«˜åˆ†å±<br>220 PPI</button>
                        </div>
                    </div>
                </div>

                <div class="control-panel">
                    <h3>ğŸ“± è®¾å¤‡ä¿¡æ¯</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <span>å±å¹•å°ºå¯¸:</span>
                            <span id="screenSize">-</span>
                        </div>
                        <div class="info-item">
                            <span>åƒç´ å¯†åº¦:</span>
                            <span id="pixelRatio">-</span>
                        </div>
                        <div class="info-item">
                            <span>è®¾å¤‡æ–¹å‘:</span>
                            <span id="orientation">-</span>
                        </div>
                        <div class="info-item">
                            <span>æµè§ˆå™¨:</span>
                            <span id="browser">-</span>
                        </div>
                        <div class="info-item">
                            <span>åˆ†è¾¨ç‡:</span>
                            <span id="resolution">-</span>
                        </div>
                        <div class="info-item">
                            <span>å¯è§†åŒºåŸŸ:</span>
                            <span id="viewport">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reference-objects">
                <h4>ğŸ“ æ ¡å‡†å‚è€ƒç‰©</h4>
                <div class="reference-list">
                    <strong>æ ‡å‡†å°ºå¯¸å‚è€ƒ:</strong><br>
                    â€¢ æ ‡å‡†ä¿¡ç”¨å¡: 85.6 Ã— 53.98 mm<br>
                    â€¢ äººæ°‘å¸(æ–°ç‰ˆ): 155 Ã— 77 mm<br>
                    â€¢ 1å…ƒç¡¬å¸: ç›´å¾„ 25 mm<br>
                    â€¢ æ ‡å‡†CDå…‰ç›˜: ç›´å¾„ 120 mm<br>
                    â€¢ A4çº¸: 210 Ã— 297 mm<br>
                    â€¢ iPhone 14: 146.7 Ã— 71.5 mm
                </div>
            </div>

            <div class="calibration-tip">
                <h4>ğŸ”§ å¦‚ä½•ç²¾ç¡®æ ¡å‡†</h4>
                <p>
                    <strong>æ–¹æ³•1:</strong> æ‹¿ä¸€å¼ ä¿¡ç”¨å¡æ”¾åœ¨å±å¹•ä¸Šï¼Œè°ƒæ•´PPIå€¼ç›´åˆ°å°ºå­åˆ»åº¦ä¸ä¿¡ç”¨å¡é•¿åº¦(85.6mm)å®Œå…¨ä¸€è‡´ã€‚<br>
                    <strong>æ–¹æ³•2:</strong> ä½¿ç”¨ç¡¬å¸å¯¹æ¯”ï¼Œ1å…ƒç¡¬å¸ç›´å¾„ä¸º25mmã€‚<br>
                    <strong>æ–¹æ³•3:</strong> å¦‚æœæœ‰å®ä½“å°ºå­ï¼Œç›´æ¥å¯¹æ¯”è°ƒæ•´åˆ°å®Œå…¨ä¸€è‡´ã€‚<br>
                    <strong>æç¤º:</strong> ä¸åŒè®¾å¤‡çš„PPIå€¼ä¸åŒï¼Œé¦–æ¬¡ä½¿ç”¨å»ºè®®æ ¡å‡†ä»¥è·å¾—æœ€ä½³ç²¾åº¦ã€‚
                </p>
            </div>
        </div>
    </div>

    <script>
        let currentPPI = 96;
        let currentOrientation = 'horizontal';
        let currentUnit = 'cm';
        let rulerLength = 0;

        // è®¾å¤‡é¢„è®¾PPIå€¼
        const devicePresets = {
            'iPhone': 163,
            'iPad': 132,
            'Android': 160,
            'MacBook': 110,
            'Desktop': 96
        };

        function detectDeviceType() {
            const userAgent = navigator.userAgent;
            const pixelRatio = window.devicePixelRatio || 1;
            
            if (userAgent.includes('iPhone')) {
                return 'iPhone';
            } else if (userAgent.includes('iPad')) {
                return 'iPad';
            } else if (userAgent.includes('Android')) {
                return 'Android';
            } else if (userAgent.includes('Mac')) {
                return 'MacBook';
            } else {
                return 'Desktop';
            }
        }

        function autoDetectPPI() {
            const deviceType = detectDeviceType();
            const basePPI = devicePresets[deviceType] || 96;
            const pixelRatio = window.devicePixelRatio || 1;
            
            // æ ¹æ®åƒç´ å¯†åº¦è°ƒæ•´
            if (pixelRatio > 2) {
                return Math.round(basePPI * 1.2);
            } else if (pixelRatio > 1.5) {
                return Math.round(basePPI * 1.1);
            }
            
            return basePPI;
        }

        function setOrientation(orientation) {
            currentOrientation = orientation;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // æ›´æ–°å°ºå­
            const ruler = document.getElementById('ruler');
            ruler.className = `ruler ${orientation}`;
            
            createRuler();
        }

        function setUnit(unit) {
            currentUnit = unit;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.unit-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            createRuler();
        }

        function setPPI() {
            const newPPI = parseInt(document.getElementById('ppiInput').value);
            if (newPPI >= 50 && newPPI <= 500) {
                currentPPI = newPPI;
                createRuler();
                updateAccuracy();
            }
        }

        function setDevicePreset(ppi) {
            currentPPI = ppi;
            document.getElementById('ppiInput').value = ppi;
            createRuler();
            updateAccuracy();
        }

        function updateAccuracy() {
            const deviceType = detectDeviceType();
            const recommendedPPI = devicePresets[deviceType] || 96;
            const deviation = Math.abs(currentPPI - recommendedPPI) / recommendedPPI;
            
            let accuracy;
            if (deviation < 0.05) {
                accuracy = 'é«˜ç²¾åº¦';
            } else if (deviation < 0.15) {
                accuracy = 'è‰¯å¥½';
            } else {
                accuracy = 'éœ€æ ¡å‡†';
            }
            
            document.getElementById('accuracy').textContent = accuracy;
        }

        function createRuler() {
            const ruler = document.getElementById('ruler');
            ruler.innerHTML = '';
            
            const isHorizontal = currentOrientation === 'horizontal';
            const maxSize = isHorizontal ? 
                Math.min(window.innerWidth * 0.8, 800) : 
                Math.min(window.innerHeight * 0.6, 600);
            
            // è®¡ç®—å°ºå­é•¿åº¦
            const pixelsPerInch = currentPPI;
            const pixelsPerCm = pixelsPerInch / 2.54;
            const pixelsPerMm = pixelsPerCm / 10;
            
            if (currentUnit === 'cm') {
                rulerLength = Math.floor(maxSize / pixelsPerCm);
                createCmRuler(ruler, maxSize, pixelsPerCm, pixelsPerMm, isHorizontal);
            } else {
                rulerLength = Math.floor(maxSize / pixelsPerInch);
                createInchRuler(ruler, maxSize, pixelsPerInch, isHorizontal);
            }
            
            // è®¾ç½®å°ºå­å°ºå¯¸
            if (isHorizontal) {
                ruler.style.width = `${maxSize}px`;
                ruler.style.height = '80px';
            } else {
                ruler.style.width = '80px';
                ruler.style.height = `${maxSize}px`;
            }
            
            updateDisplay();
        }

        function createCmRuler(ruler, maxSize, pixelsPerCm, pixelsPerMm, isHorizontal) {
            const maxCm = Math.floor(maxSize / pixelsPerCm);
            
            for (let cm = 0; cm <= maxCm; cm++) {
                const cmPosition = cm * pixelsPerCm;
                
                // å˜ç±³åˆ»åº¦
                const cmLine = document.createElement('div');
                cmLine.className = 'scale-line cm';
                if (isHorizontal) {
                    cmLine.style.left = `${cmPosition}px`;
                } else {
                    cmLine.style.top = `${cmPosition}px`;
                }
                ruler.appendChild(cmLine);
                
                // å˜ç±³æ•°å­—
                if (cm > 0) {
                    const cmNumber = document.createElement('div');
                    cmNumber.className = 'scale-number';
                    cmNumber.textContent = cm;
                    if (isHorizontal) {
                        cmNumber.style.left = `${cmPosition}px`;
                    } else {
                        cmNumber.style.top = `${cmPosition}px`;
                    }
                    ruler.appendChild(cmNumber);
                }
                
                // æ¯«ç±³åˆ»åº¦
                for (let mm = 1; mm < 10; mm++) {
                    const mmPosition = cmPosition + (mm * pixelsPerMm);
                    if (mmPosition > maxSize) break;
                    
                    const mmLine = document.createElement('div');
                    mmLine.className = mm === 5 ? 'scale-line mm5' : 'scale-line mm';
                    if (isHorizontal) {
                        mmLine.style.left = `${mmPosition}px`;
                    } else {
                        mmLine.style.top = `${mmPosition}px`;
                    }
                    ruler.appendChild(mmLine);
                }
            }
        }

        function createInchRuler(ruler, maxSize, pixelsPerInch, isHorizontal) {
            const maxInch = Math.floor(maxSize / pixelsPerInch);
            
            for (let inch = 0; inch <= maxInch; inch++) {
                const inchPosition = inch * pixelsPerInch;
                
                // è‹±å¯¸åˆ»åº¦
                const inchLine = document.createElement('div');
                inchLine.className = 'scale-line cm';
                if (isHorizontal) {
                    inchLine.style.left = `${inchPosition}px`;
                } else {
                    inchLine.style.top = `${inchPosition}px`;
                }
                ruler.appendChild(inchLine);
                
                // è‹±å¯¸æ•°å­—
                if (inch > 0) {
                    const inchNumber = document.createElement('div');
                    inchNumber.className = 'scale-number';
                    inchNumber.textContent = inch + '"';
                    if (isHorizontal) {
                        inchNumber.style.left = `${inchPosition}px`;
                    } else {
                        inchNumber.style.top = `${inchPosition}px`;
                    }
                    ruler.appendChild(inchNumber);
                }
                
                // åˆ†æ•°åˆ»åº¦ (1/2, 1/4, 1/8, 1/16)
                const fractions = [
                    {pos: 0.5, class: 'mm5'},
                    {pos: 0.25, class: 'mm'}, {pos: 0.75, class: 'mm'},
                    {pos: 0.125, class: 'mm'}, {pos: 0.375, class: 'mm'}, 
                    {pos: 0.625, class: 'mm'}, {pos: 0.875, class: 'mm'}
                ];
                
                fractions.forEach(frac => {
                    const fracPosition = inchPosition + (frac.pos * pixelsPerInch);
                    if (fracPosition > maxSize) return;
                    
                    const fracLine = document.createElement('div');
                    fracLine.className = `scale-line ${frac.class}`;
                    if (isHorizontal) {
                        fracLine.style.left = `${fracPosition}px`;
                    } else {
                        fracLine.style.top = `${fracPosition}px`;
                    }
                    ruler.appendChild(fracLine);
                });
            }
        }

        function updateDisplay() {
            const unit = currentUnit === 'cm' ? 'cm' : 'inch';
            document.getElementById('rulerLengthDisplay').textContent = `${rulerLength} ${unit}`;
            document.getElementById('currentPPI').textContent = currentPPI;
        }

        function updateDeviceInfo() {
            const getBrowserInfo = () => {
                const userAgent = navigator.userAgent;
                if (userAgent.includes('Chrome')) return 'Chrome';
                if (userAgent.includes('Firefox')) return 'Firefox';
                if (userAgent.includes('Safari')) return 'Safari';
                if (userAgent.includes('Edge')) return 'Edge';
                return 'Unknown';
            };
            
            document.getElementById('screenSize').textContent = `${screen.width}Ã—${screen.height}`;
            document.getElementById('pixelRatio').textContent = (window.devicePixelRatio || 1).toFixed(2);
            document.getElementById('orientation').textContent = window.innerWidth > window.innerHeight ? 'æ¨ªå±' : 'ç«–å±';
            document.getElementById('browser').textContent = getBrowserInfo();
            document.getElementById('resolution').textContent = `${screen.width}Ã—${screen.height}`;
            document.getElementById('viewport').textContent = `${window.innerWidth}Ã—${window.innerHeight}`;
        }

        function init() {
            // è‡ªåŠ¨æ£€æµ‹æœ€ä½³PPI
            currentPPI = autoDetectPPI();
            document.getElementById('ppiInput').value = currentPPI;
            
            // æ›´æ–°è®¾å¤‡ä¿¡æ¯
            updateDeviceInfo();
            
            // åˆ›å»ºå°ºå­
            createRuler();
            
            // æ›´æ–°ç²¾åº¦æ˜¾ç¤º
            updateAccuracy();
        }

        // äº‹ä»¶ç›‘å¬
        window.addEventListener('resize', () => {
            updateDeviceInfo();
            createRuler();
        });

        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                updateDeviceInfo();
                createRuler();
            }, 100);
        });

        // åˆå§‹åŒ–
        init();
    </script>
</body>
</html>